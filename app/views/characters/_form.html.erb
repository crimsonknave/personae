<% form_for(@character) do |f| %>
  <%= f.error_messages %>

<% if params[:action] == 'new' %>
	<% @character.user_id = session[:user_id] %>
	<input name="character[user_id]" type="hidden" value=<%= session[:user_id] %> >
<% end %>


	<table class="four_cells">
		<tr>
			<td><b><%= f.label :name %></b></td>
			<td><%= f.text_field :name %></td>
		</tr>
		<tr>
			<td><b><%= f.label :virtue %></b></td>
			<td><%= f.select :virtue, Character::VIRTUES %></td>
			<td><b><%= f.label :splat_id, "Template" %></b></td>
			<td>
				<%= select_tag :splat_id, @splat_list.join, { :onchange => remote_function(:url => {:action => "update_splat"}) } %>
				<input name="character[splat_id]" type="hidden" value="<%= @character.splat_id %>" id="character_splat_id" />
			</td>
		</tr>
		<tr>
			<td><b><%= f.label :vice %></b></td>
			<td><%= f.select :vice, Character::VICES %></td>
			
			<td class="label" id="nature_label_cell" <%=h "style='display: none'" if is_mortal?(@character) %> >
				<b><%= f.label :nature_id, @character.splat.nature_name, :id => "nature_label" %></b>
			</td>
			
			<td class="data" id="nature_id_cell" <%=h "style='display: none'" if is_mortal?(@character) %> >
				<%= f.select :nature_id, @nature_list %>
			</td>
		</tr>
		<tr>
			<td><b><%= f.label :clique_id, @character.splat.clique_name, :id => "clique_label" %></b></td>
			<td><%= f.select :clique_id, @clique_list %></td>
			<td class="label" id="ideology_label_cell" <%=h "style='display: none'" if is_mortal?(@character) %>>
				<b><%= f.label :ideology_id, @character.splat.ideology_name, :id => "ideology_label" %></b>
			</td>
			<td class="data" id="ideology_id_cell" <%=h "style='display: none'" if is_mortal?(@character) %>>
				<%= f.select :ideology_id, @ideology_list %>
			</td>
		</tr>
	</table>

	<%= f.check_box :read_name %> <%= f.label :read_name %>
	<%= f.check_box :read_clique %> <%= f.label :read_clique, "Read " + @character.splat.clique_name, :id => "read_clique_label" %>

	<span id="read_nature_span" <%=h "style='display: none'" if is_mortal?(@character) %> >
		<%= f.check_box :read_nature %> <%= f.label :read_nature, "Read " + @character.splat.nature_name, :id => "read_nature_label" %>
	</span>

	<span id="read_ideology_span" <%=h "style='display: none'" if is_mortal?(@character) %> >
		<%= f.check_box :read_ideology %> <%= f.label :read_ideology, "Read " + @character.splat.ideology_name, :id => "read_ideology_label" %>
	</span>


	<h3>Description</h3>
	<p><%= f.text_area :description %></p>
	<%= f.check_box :read_description %> <%= f.label :read_description %>


	<h3>Background</h3>
	<p><%= f.text_area :background %></p>
	<%= f.check_box :read_background %> <%= f.label :read_background %>


	<h3>Attributes</h3>
	<table class="six_cells">
		<tr>
			<td><%= f.label :intelligence %></td>
			<td><%= f.text_field :intelligence, :class => "number" %></td>
			<td><%= f.label :strength %></td>
			<td><%= f.text_field :strength, :class => "number" %></td>
			<td><%= f.label :presence %></td>
			<td><%= f.text_field :presence, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :wits %></td>
			<td><%= f.text_field :wits, :class => "number" %></td>
			<td><%= f.label :dexterity %></td>
			<td><%= f.text_field :dexterity, :class => "number" %></td>
			<td><%= f.label :manipulation %></td>
			<td><%= f.text_field :manipulation, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :resolve %></td>
			<td><%= f.text_field :resolve, :class => "number" %></td>
			<td><%= f.label :stamina %></td>
			<td><%= f.text_field :stamina, :class => "number" %></td>
			<td><%= f.label :composure %></td>
			<td><%= f.text_field :composure, :class => "number" %></td>
		</tr>
	</table>
	<%= f.check_box :read_attributes %> <%= f.label :read_attributes %>


	<h3>Skills</h3>
	<table class="six_cells">
		<tr>
			<td><%= f.label :academics %></td>
			<td><%= f.text_field :academics, :class => "number" %></td>
			<td><%= f.label :athletics %></td>
			<td><%= f.text_field :athletics, :class => "number" %></td>
			<td><%= f.label :animal_ken %></td>
			<td><%= f.text_field :animal_ken, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :computer %></td>
			<td><%= f.text_field :computer, :class => "number" %></td>
			<td><%= f.label :brawl %></td>
			<td><%= f.text_field :brawl, :class => "number" %></td>
			<td><%= f.label :empathy %></td>
			<td><%= f.text_field :empathy, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :crafts %></td>
			<td><%= f.text_field :crafts, :class => "number" %></td>
			<td><%= f.label :drive %></td>
			<td><%= f.text_field :drive, :class => "number" %></td>
			<td><%= f.label :expression %></td>
			<td><%= f.text_field :expression, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :investigation %></td>
			<td><%= f.text_field :investigation, :class => "number" %></td>
			<td><%= f.label :firearms %></td>
			<td><%= f.text_field :firearms, :class => "number" %></td>
			<td><%= f.label :intimidation %></td>
			<td><%= f.text_field :intimidation, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :medicine %></td>
			<td><%= f.text_field :medicine, :class => "number" %></td>
			<td><%= f.label :larceny %></td>
			<td><%= f.text_field :larceny, :class => "number" %></td>
			<td><%= f.label :persuasion %></td>
			<td><%= f.text_field :persuasion, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :occult %></td>
			<td><%= f.text_field :occult, :class => "number" %></td>
			<td><%= f.label :stealth %></td>
			<td><%= f.text_field :stealth, :class => "number" %></td>
			<td><%= f.label :socialize %></td>
			<td><%= f.text_field :socialize, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :politics %></td>
			<td><%= f.text_field :politics, :class => "number" %></td>
			<td><%= f.label :survival %></td>
			<td><%= f.text_field :survival, :class => "number" %></td>
			<td><%= f.label :streetwise %></td>
			<td><%= f.text_field :streetwise, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :science %></td>
			<td><%= f.text_field :science, :class => "number" %></td>
			<td><%= f.label :weaponry %></td>
			<td><%= f.text_field :weaponry, :class => "number" %></td>
			<td><%= f.label :subterfuge %></td>
			<td><%= f.text_field :subterfuge, :class => "number" %></td>
		</tr>
		<tr>
   			<td><%= f.label :skill_specialties %></td>
			<td colspan="5"><%= f.text_area :skill_specialties %></td>
		</tr>
		<tr>
			<td><%= f.label :speed %></td>
			<td><%= f.text_field :speed, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :initiative %></td>
			<td><%= f.text_field :initiative, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :defense %></td>
			<td><%= f.text_field :defense, :class => "number" %></td>
		</tr>
	</table>

<%= f.check_box :read_skills %> <%= f.label :read_skills %>


	<h3>Advantages</h3>
	<table class="three_cells">
		<tr>
			<td><%= f.label :health %></td>
			<td><%= f.text_field :health, :id => "health" %></td>
			<td><%= f.label :derangements %></td>
		</tr>
		<tr>
			<td><%= f.label :willpower %></td>
			<td><%= f.text_field :willpower %></td>
			<td rowspan="6"><%= f.text_area :derangements %></td>
		</tr>
		<tr>
			<td><%= f.label :armor %></td>
			<td><%= f.text_field :armor, :class => "number" %></td>
		</tr>
		<tr>
			<td><%= f.label :morality, @character.splat.morality_name, :id => "morality_label" %></td>
			<td><%= f.text_field :morality, :class => "number" %></td>
		</tr>
		<tr>
			<td class="label" id="power_stat_label_cell" <%=h "style='display: none'" if is_mortal?(@character) %> >
				<%= f.label :power_stat, @character.splat.power_stat_name, :id => "power_stat_label" %>
			</td>
			<td class="data" id="power_stat_cell" <%=h "style='display: none'" if is_mortal?(@character) %> >
				<%= f.text_field :power_stat, :class => "number" %>
			</td>
		</tr>
		<tr>
			<td class="label" id="fuel_label_cell" <%=h "style='display: none'" if is_mortal?(@character) %> >
				<%= f.label :fuel, @character.splat.fuel_name, :id => "fuel_label" %>
			</td>
			<td class="data" id="fuel_cell" <%=h "style='display: none'" if is_mortal?(@character) %> >
				<%= f.text_field :fuel, :class => "number" %>
			</td>
		</tr>
		<tr>
		</tr>
	</table>
	<%= f.check_box :read_advantages %> <%= f.label :read_advantages %>


	<h3>Merits</h3>
	<p><%= f.text_area :merits %></p>
	<%= f.check_box :read_merits %> <%= f.label :read_merits %>


	<h3>Equipment</h3>
	<p><%= f.text_area :equipment %></p>
	<%= f.check_box :read_equipment %> <%= f.label :read_equipment %>

	<span id="mage_powers" <%=h "style='display: none'" unless is_mage?(@character) %> >
		<h3>Arcana</h3>
		<table class="three_cells">
			<tr>
				<td><%= f.label :death %></td>
				<td><%= f.text_field :death, :class => "number" %></td>
				<td><%= f.label :common_spells %></td>
			</tr>
			<tr>
				<td><%= f.label :fate %></td>
				<td><%= f.text_field :fate, :class => "number" %></td>
				<td rowspan="10"><%= f.text_area :common_spells %></td>
			</tr>
			<tr>
				<td><%= f.label :forces %></td>
				<td><%= f.text_field :forces, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :life %></td>
				<td><%= f.text_field :life, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :matter %></td>
				<td><%= f.text_field :matter, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :mind %></td>
				<td><%= f.text_field :mind, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :prime %></td>
				<td><%= f.text_field :prime, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :space %></td>
				<td><%= f.text_field :space, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :spirit %></td>
				<td><%= f.text_field :spirit, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :time %></td>
				<td><%= f.text_field :time, :class => "number" %></td>
			</tr>
			<tr>
			</tr>
		</table>

	</span>

	<span id="woof_powers" <%=h "style='display: none'" unless is_werewolf?(@character) %> >
		<h3>Renown</h3>
		<table class="three_cells">
			<tr>
				<td><%= f.label :purity %></td>
				<td><%= f.text_field :purity, :class => "number" %></td>
				<td><%= f.label :gifts %></td>
			</tr>
			<tr>
				<td><%= f.label :glory %></td>
				<td><%= f.text_field :glory, :class => "number" %></td>
				<td rowspan="5"><%= f.text_area :gifts %></td>
			</tr>
			<tr>
				<td><%= f.label :honor %></td>
				<td><%= f.text_field :honor, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :wisdom %></td>
				<td><%= f.text_field :wisdom, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :cunning %></td>
				<td><%= f.text_field :cunning, :class => "number" %></td>
			</tr>
			<tr>
			</tr>
		</table>

		<h3>Totem</h3>
		<p><%= f.text_area :totem %></p>
	</span>

	<span id="vampire_powers" <%=h "style='display: none'" unless is_vampire?(@character) %> >
		<h3>Disciplines</h3>
		<table class="three_cells">
			<tr>
				<td><%= f.label :animalism %></td>
				<td><%= f.text_field :animalism, :class => "number" %></td>
				<td><%= f.label :covenant_disciplines %></td>
			</tr>
			<tr>
				<td><%= f.label :auspex %></td>
				<td><%= f.text_field :auspex, :class => "number" %></td>
				<td rowspan="9"><%= f.text_area :covenant_disciplines %></td>
			</tr>
			<tr>
				<td><%= f.label :celerity %></td>
				<td><%= f.text_field :celerity, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :dominate %></td>
				<td><%= f.text_field :dominate, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :majesty %></td>
				<td><%= f.text_field :majesty, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :nightmare %></td>
				<td><%= f.text_field :nightmare, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :protean %></td>
				<td><%= f.text_field :protean, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :obfuscate %></td>
				<td><%= f.text_field :obfuscate, :class => "number" %></td>
			</tr>
			<tr>
				<td><%= f.label :vigor %></td>
				<td><%= f.text_field :vigor, :class => "number" %></td>
			</tr>
			<tr>
			</tr>
		</table>
	</span>
	<span id="read_powers_span" <%=h "style='display: none'" if is_mortal?(@character) %> >
		<%= f.check_box :read_powers %> <%= f.label :read_powers %>
	</span>


		<h3>Experience</h3>
		<p><%= f.text_area :experience %></p>
		<%= f.check_box :read_experience %> <%= f.label :read_experience %>

	<div id="navbar">
		<%= link_to "Cancel", :back, :class => "button" %>
		<%= f.submit 'Save', :class => "button" %>
	</div>
<% end %>
